## Antecedentes del Proyecto

__Proyecto Actual__: EVM Wallet Panel - Dapp modular para herramientas EVM con Next.js, React, TypeScript, Tailwind, Cloudflare Workers/KV,wagmi, RainbowKit.

__Nuevo M√≥dulo__: Panel "Alphas" - Sistema inteligente para seguimiento de proyectos nuevos con potencial airdrop, incluyendo pesta√±as m√∫ltiples, notas de seguimiento, enlaces sociales, notificaciones, collaboration, etc.

__Arquitectura__: Integrar como ruta /alphas en la dapp existente, reutilizando infraestructura (auth, layout, KV), enfoc√°ndonos en tecnolog√≠as gratuitas/c√≥digo abierto.

__Tiempo Estimado__: 15 semanas desarrollo (equipo 1-2 devs).

__Costo Estimado__: $3k-7k (APIs gratuitas, hosting Cloudflare, desarrollo).

## Plan de Trabajo Completo

### Tecnolog√≠a Stack del Nuevo M√≥dulo

- __Frontend__: React/TypeScript (existente en la dapp)
- __Backend__: Cloudflare Workers (existente) + Puppeteer para scraping
- __Storage__: Cloudflare KV inicialmente (escalable a D1 si necesario)
- __APIs__: Telegram Bots, Discord Webhooks, CoinGecko free, Google Calendar
- __Libraries__: Chart.js, Quill.js rich editor, jsPDF export
- __Auth__: Extender existente con wallet addresses + nuevos roles admin

### Detalles T√©cnicos y Contexto

#### Esquema Database Cloudflare KV

```javascript
# Global Admin Data
alpha_admin_roles: { users: [{address: "0x...", role: "super_admin", permissions: [...]}]}
alpha_projects_global: { projects: [{id, name, category, website, socialLinks, ...}]}

# Per-User Data  
${userAddress}_alpha_tracked: { projects: ["project_id1", "project_id2"]}
${userAddress}_alpha_notes: { [project_id]: [{date, content, tags, shared, ...}]}
${userAddress}_alpha_collabs: { groups: [{id, name, type: "public/private", members: [...]}]}
${userAddress}_alpha_preferences: { notifications: {email, telegram, discord}}
${userAddress}_alpha_alerts: { [alertType]: {enabled, settings}}

# Social Data Cache (TTL 1h)
alpha_social_cache_${projectId}: { telegram: {...}, discord: {...}, rss: [...]}
alpha_price_cache_${symbol}: { price, marketcap, change24h } (TTL 5min)
```

#### APIS Externas y Configuraci√≥n

- __Telegram Bot API__: @BotFather para crear bot, obtener token
- __Discord Webhooks__: Configurar webhooks por proyecto/servidor
- __Google Calendar__: OAuth app, scopes calendar.readonly/calendar.events
- __CoinGecko/MarketCap__: API keys gratuitas, rate limits 10-50 req/min
- __IPFS/Pinata__: Para archivos pesados si crece (free tier)

#### Roles y Permisos Admin

```javascript
1. Super Admin: Full CRUD proyectos, user management, system config
2. Editor: CRUD proyectos (con aprobaci√≥n workflow)
3. Viewer/Moderator: Read-only, manejar reports/flags
4. User: Track proyectos, agregar notas, crear collaboration groups
```

### Roadmap por Fases con Pasos Detallados

#### FASE 1: INFRAESTRUCTURA + PANEL ADMIN (3 SEMANAS) ‚úÖ COMPLETADO

__D√≠a 1-5: Setup y Routing__ ‚úÖ

1. ‚úÖ Crear directorio `src/app/alphas/`
2. ‚úÖ Crear `page.tsx` con layout b√°sico
3. ‚úÖ A√±adir enlace en `ActionPanel.tsx`: `<ActionButton href="/alphas">Alphas Panel</ActionButton>`
4. ‚úÖ Configurar context nuevo `AlphaContext.tsx` para state management pesta√±as
5. ‚úÖ Setup navegaci√≥n breadcrumbs para /alphas

__D√≠a 6-10: Roles Admin en KV__ ‚úÖ

1. ‚úÖ Extender Cloudflare worker con endpoints admin:

   - ‚úÖ `/api/alphas/admin/roles` (GET/POST)
   - ‚úÖ `/api/alphas/admin/projects` (GET/PUT/DELETE)
   - ‚úÖ `/api/alphas/admin/users`

2. ‚úÖ Implementar middleware de auth en worker para verificar permisos

3. ‚úÖ Crear funci√≥n validar permisos por endpoint

4. ‚úÖ Update `workers/src/index.ts` con nuevos handlers

__D√≠a 11-15: UI Admin B√°sica__ ‚úÖ

1. ‚úÖ Crear componentes admin en `src/app/components/alphas/`
2. ‚úÖ Layout admin con sidebar navegaci√≥n (Projects, Users, Analytics)
3. ‚úÖ Formularios CRUD proyectos con validaci√≥n
4. ‚úÖ Tabla users con filters/search

__D√≠a 16-20: Workflows Aprobaci√≥n__ ‚úÖ

1. ‚úÖ Implementar status projects: draft, pending, approved, rejected
2. ‚úÖ Email notifications workflow (integraci√≥n futura con Mailgun)
3. ‚úÖ Audit log acciones admin en KV
4. ‚úÖ Tests unitarios admin functionality

#### FASE 2: LISTA + PESTA√ëAS (2 SEMANAS) ‚úÖ COMPLETADO

__Semana 4: Lista Proyectos__ ‚úÖ

1. ‚úÖ Component ProjectsGrid con filtros por category/potencial
2. ‚úÖ Implementar categor√≠as sistem√°ticas (DeFi, NFT, GameFi, Tools, Gaming)
3. ‚úÖ Search functionality con highlight
4. ‚úÖ Infinite scroll para performance
5. ‚úÖ Tags/chips para caracter√≠sticas proyecto

__Semana 5: Sistema Pesta√±as__ ‚úÖ

1. ‚úÖ Stateful tabs con React Context + localStorage
2. ‚úÖ Component TabBar con close buttons, drag-reorder
3. ‚úÖ Keyboard shortcuts (Ctrl+T nueva tab, Ctrl+W cerrar)
4. ‚úÖ Save/load tabs por sesi√≥n
5. ‚úÖ Responsive design mobile/desktop

#### FASE 3: PANEL INDIVIDUAL + NOTAS (2 SEMANAS) ‚úÖ Claudia COMPLETADO

__Semana 6: Vista Detalle__ ‚úÖ

1. ‚úÖLayout maestro-detalle con sidebar info
2. ‚úÖ Secci√≥n descripci√≥n (editables) con inline editing
3. ‚úÖ Enlaces sociales funcionables (Twitter, Discord, Telegram, GitHub)
4. ‚ö†Ô∏è Bot√≥n Follow/Unfollow (pendiente implementaci√≥n funcional)

__Semana 7: Sistema Notas__ ‚úÖ

1. ‚úÖ Rich editor integrado (textarea con capacidades b√°sicas)
2. ‚úÖ Tagging system: #followup, #activity, #research, #reminder, #whitepaper
3. ‚úÖ Timestamping autom√°tico con formato legible
4. ‚úÖ Public/private notes toggle con indicadores visuales
5. ‚ö†Ô∏è Attachments support b√°sico (ROADMAP: extender a archivos)

__+ Funcionalidades Adicionales Implementadas:__
- ‚úÖ Timeline Social: Discord + Twitter (mock data preparado para APIs reales)
- ‚úÖ Sistema dual-columna responsiva: Notas Izq | Social Timeline Der
- ‚úÖ Gesti√≥n completa de notas: crear, editar, eliminar
- ‚úÖ Etiquetas sugeridas autom√°ticas
- ‚úÖ Scroll autom√°tico y gesti√≥n de estado

#### FASE 4: SCRAPING + SOCIALES (2 SEMANAS)

__Semana 8: Puppeteer Setup__

1. Instalar Puppeteer en workers environment
2. Crear funci√≥n scrapeWebsite(url) para metadata general
3. Cache responses 1h en KV para performance
4. Error handling rate limits / timeouts

__Semana 9: Integraci√≥n Redes__

1. Telegram Bot setup:

   - /newbot @BotFather obtener token
   - Webhook URL en Cloudflare function
   - Commands: /alert [project] [message]

2. Discord webhooks setup por proyecto

3. RSS parser para blogs de proyectos

4. Auto-detection cambios enlaces

#### FASE 5: NOTIFICACIONES + COMPARACI√ìN (2 SEMANAS)

__Semana 10: Notificaciones Base__

1. In-app notifications con React Toast
2. User preferences en KV user settings
3. Trigger manual proyecto updates
4. Scheduled notifications (Cloudflare Cron)

__Semana 11: An√°lisis Comparativo__

1. View split-screen con resizable panels
2. Diff visual usando React diff views
3. Charts b√°sicos con Chart.js
4. Export comparison PDF con jsPDF

#### FASE 6: EXPORT/IMPORT + COLLABORATION (2 SEMANAS)

__Semana 12: Export Basics__

1. Export JSON/CSV user data
2. ZIP bundle notes + attachments
3. Scheduled backups a Cloudflare R2
4. Versioning backups con timestamps

__Semana 13: Collaboration__

1. Group creation (public/private)
2. Invite system email
3. Share projects espec√≠fico con permissions
4. Comments/discussions por proyecto

#### FASE 7: CATEGORIZACI√ìN + CALENDAR (2 SEMANAS)

__Semana 14: Categorizaci√≥n__

1. Keywords mapping b√°sicos:

   - DEX/AM plead M: DeFi
   - Token/NFT: Gaming
   - Bridge: Infrastructure

2. Manual override admin

3. Auto-suggestions desde contenido scraped

4. Confidence scores por category

__Semana 15: Calendar + Market__

1. Google Calendar OAuth + integration
2. Recurring reminders notas pendientes
3. CoinGecko API precio alerts
4. Dashboard analytics con Chart.js

### Requerimientos Pre-Implementaci√≥n

#### Cuentas y Credenciales

1. __Cloudflare__:

   - Workers/KV/D1 activados
   - Domain/subdomain para API
   - R2 bucket para backups

2. __Telegram__:

   - Cuenta @username disponible
   - Bot creado v√≠a @BotFather
   - Token API generado

3. __Discord__:

   - Server para proyecto disponible
   - Permisos crear webhooks
   - Bot account optional

4. __Google Developer Console__:

   - Project creado
   - Calendar API enabled
   - OAuth credentials generated

5. __APIs Marketplace__:

   - CoinGecko API key (free)
   - Email service setup (Mailgun free)

#### Ambiente Desarrollo

```javascript
# Tech stack adicional
- @google-analytics/js (optional analytics)
- puppeteer (for scraping)
- quilljs (rich editor)  
- chart.js + react-chartjs-2 (graphs)
- jspdf (PDF export)
- react-div-100vh (mobile optimization)

# Dependencies nuevas
npm install puppeteer chart.js react-chartjs-2 quilljspdf react-div-100vh
```

#### Testing Strategy

- Unit tests: Jest + Testing Library para componentes
- E2E: Playwright para pesta√±as complejas
- Integration: Workers testing con vr:test runner
- Performance: Lighthouse CI, Web Vitals monitoring

#### Deployment Checklist

- [ ] Environment variables configuradas produ√ß√£o
- [ ] KV bindings actualizados en Cloudflare
- [ ] D1 database migrations si usado
- [ ] Reverse proxy configured si microservicios
- [ ] SSL/TLS certificates validos
- [ ] Domain pointing correctamente
- [ ] Zero-downtime deployment strategy
- [ ] Rollback strategy defined
- [ ] Monitoring dashboards setup

#### M√©tricas √âxito

- User engagement: Time spent in /alphas
- Database growth: Proyectos tracked per user
- API usage: Clicks por notificaci√≥n/alert
- Admin load: New projects added weekly

### Risk Management

#### Riesgos T√©cnicos

__Alta Frecuencia Web Scraping__: Rate limits ‚Üí Solution: Request throttling, caching agresivo __API Rate Limits Social__: L√≠mite hits ‚Üí Solution: Usuario debe proporcionar API keys propias __Storage Growth__: KV unlimited pero costs ‚Üí Solution: Archive viejo data a R2 __Concurrent Users__: Pesta√±as m√∫ltiples state conflicts ‚Üí Solution: Optimistic updates + conflict resolution

#### Riesgos Operativos

__Dependencias Externas__: APIs down ‚Üí Solution: Failures graceful (cache local, etc.) __Legal Compliance__: Web scraping ‚Üí Solution: Respect robots.txt, no content theft __Scalability__: Usuario growth ‚Üí Solution: D1 migration preparado __Security__: User data sensitive ‚Üí Solution: Encryption at rest, audit logs


### LOG DE DESARROLLO E INCIDENTES RESUELTOS

#### v1.3.1 - Estado Actual del Desarrollo (18/09/2025)

**Proyecto Completado (35% del Roadmap Original):**
- ‚úÖ **Fase 1**: Infraestructura + Panel Admin (100% completado - 3 semanas)
- ‚úÖ **Fase 2**: Lista + Pesta√±as Stateful (100% completado - 2 semanas)
- ‚úÖ **Fase 3**: Vista Detalle + Notas Personales (100% completado - 2 semanas)
- üöß **Total Progreso**: 7 semanas completadas de 15 estipuladas

**Funcionalidades Implementadas:**
- üèóÔ∏è Arquitectura completa Admin con roles (super_admin, editor, viewer, moderator)
- üìä Panel CRUD completo para gesti√≥n de proyectos alpha
- üîç Grid de proyectos p√∫blicos con filtros, b√∫squeda y categor√≠as
- üóÇÔ∏è Sistema de pesta√±as stateful con localStorage y shortcuts (Ctrl+T, Ctrl+W)
- üìù Vista detallada de proyectos con gesti√≥n de notas personales
- üè∑Ô∏è Sistema de tags inteligente (#followup, #activity, #research, #reminder)
- üì± Timeline social preparado (Discord + Twitter con mock data)
- üîí Autenticaci√≥n wallet integrada con permisos granulares

**Problemas T√©cnicos Solucionados:**

**Critico #1: Render Loop Infinito (Parpadeo 10 FPS)**
- **Problema**: Bucle infinito de renders causando 100+ consultas al backend
- **Causa**: `useEffect` dependiente de `updateTab()` causando recursi√≥n
- **Soluci√≥n**: Memorizaci√≥n con `useCallback` + `setTimeout` para updates
- **Resultado**: UI estable, 1 consulta por proyecto, performance normal

**Critico #2: Informaci√≥n Err√≥nea en Pesta√±as**
- **Problema**: Todas las pesta√±as mostraban "Alpha Project Sample"
- **Causa**: `ProjectDetail.tsx` usaba datos mock fijos
- **Soluci√≥n**: Integraci√≥n real con API projects, carga din√°mica por `projectId`
- **Resultado**: Cada pesta√±a muestra informaci√≥n espec√≠fica del proyecto clickeado

**Critico #3: Posici√≥n Incorrecta del TabBar**
- **Problema**: TabBar aparec√≠a arriba del contenido, causando render loops
- **Causa**: TabBar dentro de ProjectsGrid causando contexto mixto
- **Soluci√≥n**: TabBar movido a p√°gina principal despu√©s del header
- **Resultado**: Estructura limpia: Header ‚Üí TabBar ‚Üí Contenido Din√°mico

**Mejoras T√©cnicas Aplicadas:**
- ‚úÖ Context optimizado con `useCallback` para estabilidad
- ‚úÖ Prevenci√≥n de loops con `setTimeout` y dependencias controladas
- ‚úÖ Arquitectura limpia: separaci√≥n UI est√°tica/din√°mica
- ‚úÖ Error boundaries en API calls
- ‚úÖ Dise√±o responsivo mobile-first
- ‚úÖ Accessibility: tooltips, keyboard navigation
- ‚úÖ Estado consistente: localStorage persiste pesta√±as

**Estatus de Funcionalidades:**
- ‚úÖ Crear proyectos (admin) y ver en grid p√∫blico
- ‚úÖ Filtrar proyectos por categor√≠a/b√∫squeda
- ‚úÖ Abrir m√∫ltiples pesta√±as de proyectos
- ‚úÖ Gestionar notas personales por proyecto
- ‚úÖ Editar descripciones de proyectos
- ‚úÖ Enlaces sociales funcionales
- ‚ö†Ô∏è Timeline social con mock data (preparado para APIs reales)
- üöß Follow/unfollow proyectos (placeholder)
- üöß Attachments en notas (ROADMAP)
- üöß Scraping web autom√°tico (ROADMAP)
- üöß Integraciones Discord/Twitter reales (ROADMAP)

**Pr√≥ximas Fases:**
- üìÖ Fase 4: Web Scraping + Social APIs (2 semanas)
- üìÖ Fase 5-7: Notificaciones + Analytics + Calendario (6 semanas)

**Repositorio GitHub:** https://github.com/edwinosky/evm-tools
